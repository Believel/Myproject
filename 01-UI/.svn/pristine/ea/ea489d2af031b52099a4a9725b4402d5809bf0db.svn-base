(function() {
    angular.module('app', ['ui.router'])
        .directive('contentTop', contentTop)
        .directive('pageTop', pageTop)
        .directive('baSidebar', baSidebar)
        .config(function($stateProvider, $urlRouterProvider) {
            $urlRouterProvider.otherwise('/home');
            $stateProvider
                .state('home', {
                    url: '/home',
                    templateUrl: '/view/waibaozhuang.html'
                })
                .state('detail', {
                    url: '/detail',
                    templateUrl: '/view/detail.html'
                })
                .state('add', {
                    url: '/add',
                    templateUrl: '/view/detail.html'
                })
        }).controller('mainCon',function($scope,$http) {
            $scope.wbzData = '';
            var a = $http({
                method: 'GET',
                url: 'http://192.168.0.201:3002/products',
                dataType: 'jsonp'
            });
            console.log(111);
            a.then(function(res){
                console.log(333);
                $scope.wbzData = res;
                console.log(JSON.stringify($scope.wbzData));
                $scope.wbzDataTitle = [];
                for(k in $scope.wbzData.data[2]){
                    console.log(k);
                    $scope.wbzDataTitle.push(k);
                }
                console.log($scope.wbzDataTitle.length);
            })
            $scope.setColor = function(i) {
                // var child = angular.element(i.parentNode.parentNode.childNodes);
                // angular.forEach(child, function(i) {
                //     // console.log(i.css(.backgroundColor))
                // });
                

                // angular.element(i.parentNode).css('background', 'red');
            }
        })

    function contentTop($location) {
        return {
            restrict: 'E',
            templateUrl: '/component/contentTop.html'
        };
    }

    function pageTop() {
        return {
            restrict: 'E',
            templateUrl: '/component/pageTop.html'
        };
    }

    function baSidebar() {
        return {
            restrict: 'E',
            templateUrl: '/component/baSidebar.html'
        };
    }

})();
